# Структура проекта

### DAGs

В папке `dags` находятся основные даги:

- `dags/init-dwh-dag.py` - Даг инициализирующий все слои хранилища. Запускается один раз, после развертки airflow в докере. Выполняет DDL скприпт `sql/init-dwh-ddl.sql` и триггерит на запуск даг `load-stg-dwh-dag.py`
- `dags/load-stg-dwh-dag.py`  - Загрузка или апдейт STG слоя
- `dags/load-dds-dwh-dag.py` - Загрузка DDS слоя
- `dags/load-cdm-dag.py` - Финальный даг, обновляющий витрины в CDM слое

### Бизнес логика

Вся бизнес логика разбита по пакетам и находится в папке `pkg`:

- `pkg/main.py` - Здесь объявлены основные классы и соответствующие методы, передвигающие данные
- `pkg/objs.py` - Объявление датаклассов
- `pkg/tasks.py` - Таски, которые импортируются далее в даги
- `pkg/utils.py` - Различные утилиты, коннектор к БД и тому подобные
- `pkg/errors.py` - Объявление эксепшенов

### SQL

DDL скрипты собраны в единый файл  `sql/init-dwh-ddl.sql`, который инициализирует все слови хранилища одной транзакцией.